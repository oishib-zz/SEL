
%%%%
%%
%% This file sets up the Sign and Label datatypes and creates Sign and
%% Label macros.
%%
%% Signs generally represent interesting parts of game area, usually
%% as things posted on walls.  Labels represent other things, often on
%% or inside envelopes, that are part of complex mechanics.
%%
%% The default value for \MYloc will inherit location from the Place
%% or Sign most immediately up the ownership tree.  Override this by
%% setting \MYloc to anything (even blank).
%%
%% Sign is for full-sized signs that would cover most of a large
%% manila envelope; SignMedium is for signs sized to half-sized manila
%% envelopes; SignSmall is for signs sized for small manila envelopes
%% (the same size as item cards).  Label, LabelMedium, and LabelSmall
%% are analagous, but they don't have a \takedownby note at the
%% bottom.  You can always use a sign or label without an envelope or
%% with a differently-sized envelope.  Choose which based on
%% visibility and content.
%%
%% SignTiny is for signs you want to be hard to find; it is small and
%% does not have a \takedownby note.  SignDot is for a very small
%% "dot" which only has a title.
%%
%% SignStrip produces a strip of paper (without a \takedownby note)
%% with labels on the outside that show on both sides if you fold it
%% in half.  These are a convenient alternative to sub-envelopes. They
%% can also be used for "s-packets" taped to walls (see
%% Extras/README-s-packets).
%%
%% LabelCover ces a label similar to the cover to a research
%% notebook.  LabelPage, likewise, produces a page.
%%
%% EOG is for full-sized end-of-game signs.
%%
%%%%%

\DECLARESUBTYPE{Sign}{Element}
\PRESETS{Sign}{
  \FD\MYloc	{\mylocation} %% real-space location
  \FD\MYtext	{} %% text of sign
  }
\POSTSETS{Sign}{
  \edef\mylocation{\MYloc}
  \protected@edef\@ownerstring{%
    \MYname%
    \ifx\mylocation\empty\else\ (\mylocation)\fi%
    }
  }
\def\mylocation{}

\def\loc#1{\rs\MYloc{#1}}

\DECLARESUBTYPE{SignMedium}{Sign}
\DECLARESUBTYPE{SignSmall}{Sign}
\DECLARESUBTYPE{SignTiny}{Sign}
\DECLARESUBTYPE{SignDot}{Sign}
\PRESETS{SignDot}{\s\MYtext{}}

\DECLARESUBTYPE{Label}{Sign}
\PRESETS{Label}{\s\MYloc{}}
\DECLARESUBTYPE{LabelMedium}{Label}
\DECLARESUBTYPE{LabelSmall}{Label}

\DECLARESUBTYPE{SignStrip}{Sign}
\DECLARESUBTYPE{LabelCover}{Label}
\DECLARESUBTYPE{LabelPage}{Label}

\DECLARESUBTYPE{EOG}{Sign}
\PRESETS{EOG}{%
  \s\MYname	{End Of Game}
  \s\MYtext	{{\bf\Huge You may not pass through here.}}
  }


%%%%%
%% \signbig[<location>]{<name>}{<text>}
%% \eog[<location>]
%%
%% \signmdeium[<location>]{<name>}{<text>}
%% \signsmall[<location>]{<name>}{<text>}
%% \signtiny[<location>]{<name>}{<text>}
%% \signdot[<location>]{<name>}
%%
%% \labelbig{<name>}{<text>}
%% \labelmedium{<name>}{<text>}
%% \labelsmall{<name>}{<text>}
%%
%% \signstrip[<location>]{<name>}{<text>}
%% \labelcover{<name>}{<text>}
%% \labelpage{<name>}{<text>}
\newinstance{Sign}{\signbig[3][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}\s\MYtext{#3}}
\newinstance{EOG}{\eog[1][\mylocation]}{\s\MYloc{#1}}

\newinstance{SignMedium}{\signmedium[3][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}\s\MYtext{#3}}
\newinstance{SignSmall}{\signsmall[3][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}\s\MYtext{#3}}
\newinstance{SignTiny}{\signtiny[3][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}\s\MYtext{#3}}
\newinstance{SignDot}{\signdot[2][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}}

\newinstance{Label}{\labelbig[2]}{
  \s\MYname{#1}\s\MYtext{#2}}
\newinstance{LabelMedium}{\labelmedium[2]}{
  \s\MYname{#1}\s\MYtext{#2}}
\newinstance{LabelSmall}{\labelsmall[2]}{
  \s\MYname{#1}\s\MYtext{#2}}

\newinstance{SignStrip}{\signstrip[3][\mylocation]}{
  \s\MYloc{#1}\s\MYname{#2}\s\MYtext{#3}}
\newinstance{LabelCover}{\labelcover[2]}{
  \s\MYname{#1}\s\MYtext{#2}}
\newinstance{LabelPage}{\labelpage[2]}{
  \s\MYname{#1}\s\MYtext{#2}}


%%%%%
%% \sEOG{}
%% use \sEOg[\loc{<location>}]{} for EOG sign at a specific place
\NEW{EOG}{\sEOG}{
  }


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NEW{Sign}{\sTest}{
  \s\MYname	{A Room}
  \s\MYloc	{10-250}
  \s\MYtext	{A lecture hall with large, sliding blackboards.}
  }
  
  
  \NEW{Sign}{\sPixieOne}{
  \s\MYname	{Artistic Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie whistles a blithe tune but does not address you.
  If there is an item envelope labeled "Pixie Dust," the pixie looks right at you with glinting eyes and offers a trade. If you provide the pixie with a personal musical performance lasting at least 30 seconds and involving at least two different types of instruments, you may take the pixie dust. If you sing, your voice counts as one type of instrument. 
  If you give the offering, then you may remove the envelope from the paper and take the pixie dust.
  }
  }
  
  \NEW{Sign}{\sPixieTwo}{
  \s\MYname	{Materialistic Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie ignores you.
  If there is an item envelope labeled "Pixie Dust," the pixie turns to you and offers a trade. If you provide the pixie with a cellphone, you may take the pixie dust.
  If you choose to give a cellphone, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }

 \NEW{Sign}{\sPixieThree}{
  \s\MYname	{Hungry Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, chewing on a massive piece of plain white bread. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie doesn't deign to talk to you.
  If there is an item envelope labeled "Pixie Dust," the pixie looks right at you with hungry eyes and offers a trade. If you provide the pixie with two different types of sauce to put on the bread, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
  
   \NEW{Sign}{\sPixieFour}{
  \s\MYname	{Greedy Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, hovering over a pile of pennies. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie doesn't bother talking to you.
  If there is an item envelope labeled "Pixie Dust," the pixie looks right at you with greedy eyes and offers a trade. If you provide the pixie with a coin, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
  
     \NEW{Sign}{\sPixieFive}{
  \s\MYname	{Greedy Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, hovering over a pile of dimes. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie doesn't bother talking to you.
  If there is an item envelope labeled "Pixie Dust," the pixie looks right at you with greedy eyes and offers a trade. If you provide the pixie with two coins, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }

\NEW{Sign}{\sPixieSix}{
  \s\MYname	{Artistic Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie mutters poetry to itself and does not address you.
  If there is an item envelope labeled "Pixie Dust," the pixie glances at you and offers a trade. If you provide the pixie with two writing implements, you may take the pixie dust. Paintbrushes count as writing implements. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
  \NEW{Sign}{\sPixieSeven}{
  \s\MYname	{Artistic Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie mutters poetry to itself and does not address you.
  If there is an item envelope labeled "Pixie Dust," the pixie glances at you and offers a trade. If you provide the pixie with two writing implements, you may take the pixie dust. Paintbrushes count as writing implements. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
  \NEW{Sign}{\sPixieSeven}{
  \s\MYname	{Hungry Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie mutters poetry to itself and does not address you.
  If there is an item envelope labeled "Pixie Dust," the pixie fixes hungry eyes on you and offers a trade. If you provide the pixie with three dessert foods, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
  \NEW{Sign}{\sPixieEight}{
  \s\MYname	{Hungry Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie mutters poetry to itself and does not address you.
  If there is an item envelope labeled "Pixie Dust," the pixie fixes hungry eyes on you and offers a trade. If you provide the pixie with three types of fruit, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
   \NEW{Sign}{\sPixieEight}{
  \s\MYname	{Artistic Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie mutters poetry to itself and does not address you.
  If there is an item envelope labeled "Pixie Dust," the pixie fixes hungry eyes on you and offers a trade. If you provide the pixie with two items of theatrical or musical paraphernalia, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
   \NEW{Sign}{\sPixieEight}{
  \s\MYname	{Greedy Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie pointedly ignores you.
  If there is an item envelope labeled "Pixie Dust," the pixie fixes mischievous eyes on you and offers a trade. If you provide the pixie with three items that you do not own, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
   \NEW{Sign}{\sPixieEight}{
  \s\MYname	{Greedy Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie pointedly ignores you.
  If there is an item envelope labeled "Pixie Dust," the pixie fixes mischievous eyes on you and offers a trade. If you provide the pixie with two items that you do not own, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
   \NEW{Sign}{\sPixieEight}{
  \s\MYname	{Hungry Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie does not speak with you.
  If there is an item envelope labeled "Pixie Dust," the pixie looks at you thoughtfully and offers a trade. If you provide the pixie with one fruit and one dessert item, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
   \NEW{Sign}{\sPixieEight}{
  \s\MYname	{Ambitious Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie does not speak with you.
  If there is an item envelope labeled "Pixie Dust," the pixie sizes you up for a moment and then offers a trade. If you provide the pixie with two U.S. dollar bills of any denomination, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
  \NEW{Sign}{\sPixieNine}{
  \s\MYname	{Hungry Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie does not speak with you.
  If there is an item envelope labeled "Pixie Dust," the pixie sizes you up for a moment and then offers a trade. If you provide the pixie with a food item including chocolate, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
  \NEW{Sign}{\sPixieNine}{
  \s\MYname	{Hungry Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie does not speak with you.
  If there is an item envelope labeled "Pixie Dust," the pixie sizes you up for a moment and then offers a trade. If you provide the pixie with two different sorts of crackers, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
    \NEW{Sign}{\sPixieNine}{
  \s\MYname	{Curious Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, surrounded by thread and scraps of cloth. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie does not speak with you.
  If there is an item envelope labeled "Pixie Dust," the pixie flies towards you and offers a trade. If you provide the pixie with something made of cloth, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
   \NEW{Sign}{\sPixieNine}{
  \s\MYname	{Modern Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, surrounded by a coiled USB cable. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie does not speak with you.
  If there is an item envelope labeled "Pixie Dust," the pixie giggles and offers a trade. If you provide the pixie with an Apple product or an actual apple, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
  \NEW{Sign}{\sPixieTen}{
  \s\MYname	{Childish Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie does not speak with you.
  If there is an item envelope labeled "Pixie Dust," the pixie looks at you with widened eyes and offers a trade. If you provide the pixie with a ball, doll, or other toy, you may take the pixie dust. 
  If you choose to give the offering, put it in the envelope below this sign to hand it over to the pixie. You cannot put in anything except the requested offering. Then you may remove the "Pixie Dust" envelope.
  }
  }
    \NEW{Sign}{\sPixieEleven}{
  \s\MYname	{Artistic Pixie}
  \s\MYloc	{}
  \s\MYtext	{A tiny pixie the size of a finger flits around behind a magical barrier, spinning pixie dust out of air. If there is not an item envelope labeled "Pixie Dust" attached to this sign, the pixie whistles a blithe tune but does not address you.
  If there is an item envelope labeled "Pixie Dust," the pixie looks right at you with glinting eyes and offers a trade. If you provide the pixie with a personal musical performance lasting at least 30 seconds and involving at least one different types of instruments, you may take the pixie dust. If you sing, your voice counts as a type of instrument. 
  If you give the offering, then you may remove the envelope from the paper and take the pixie dust.
  }
  }
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%